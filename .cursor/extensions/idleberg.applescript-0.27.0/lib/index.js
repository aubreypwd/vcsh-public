"use strict";var fr=Object.create;var R=Object.defineProperty;var pr=Object.getOwnPropertyDescriptor;var dr=Object.getOwnPropertyNames;var gr=Object.getPrototypeOf,mr=Object.prototype.hasOwnProperty;var W=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),vr=(e,r)=>{for(var t in r)R(e,t,{get:r[t],enumerable:!0})},he=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of dr(r))!mr.call(e,i)&&i!==t&&R(e,i,{get:()=>r[i],enumerable:!(n=pr(r,i))||n.enumerable});return e};var I=(e,r,t)=>(t=e!=null?fr(gr(e)):{},he(r||!e||!e.__esModule?R(t,"default",{value:e,enumerable:!0}):t,e)),hr=e=>he(R({},"__esModule",{value:!0}),e);var L=W(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});var yr=require("vscode"),y=require("path");function wr(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var d=wr(yr);function X(e,r,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(n.next(u))}catch(f){s(f)}}function c(u){try{l(n.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((n=n.apply(e,r||[])).next())})}function q(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=r.call(e,t)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ae(e){var r={exports:{}};return e(r,r.exports),r.exports}var J=function(e){return e&&e.Math==Math&&e},g=J(typeof globalThis=="object"&&globalThis)||J(typeof window=="object"&&window)||J(typeof self=="object"&&self)||J(typeof ye=="object"&&ye)||function(){return this}()||Function("return this")(),_=function(e){try{return!!e()}catch{return!0}},Y=!_(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Ie={}.propertyIsEnumerable,je=Object.getOwnPropertyDescriptor,xr=je&&!Ie.call({1:2},1),br=xr?function(r){var t=je(this,r);return!!t&&t.enumerable}:Ie,Sr={f:br},Me=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},Or={}.toString,De=function(e){return Or.call(e).slice(8,-1)},Fr="".split,Pr=_(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return De(e)=="String"?Fr.call(e,""):Object(e)}:Object,V=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},ne=function(e){return Pr(V(e))},h=function(e){return typeof e=="object"?e!==null:typeof e=="function"},_e=function(e,r){if(!h(e))return e;var t,n;if(r&&typeof(t=e.toString)=="function"&&!h(n=t.call(e))||typeof(t=e.valueOf)=="function"&&!h(n=t.call(e))||!r&&typeof(t=e.toString)=="function"&&!h(n=t.call(e)))return n;throw TypeError("Can't convert object to primitive value")},Tr={}.hasOwnProperty,v=function(e,r){return Tr.call(e,r)},ee=g.document,Er=h(ee)&&h(ee.createElement),kr=function(e){return Er?ee.createElement(e):{}},Be=!Y&&!_(function(){return Object.defineProperty(kr("div"),"a",{get:function(){return 7}}).a!=7}),we=Object.getOwnPropertyDescriptor,$r=Y?we:function(r,t){if(r=ne(r),t=_e(t,!0),Be)try{return we(r,t)}catch{}if(v(r,t))return Me(!Sr.f.call(r,t),r[t])},Le={f:$r},z=function(e){if(!h(e))throw TypeError(String(e)+" is not an object");return e},xe=Object.defineProperty,Cr=Y?xe:function(r,t,n){if(z(r),t=_e(t,!0),z(n),Be)try{return xe(r,t,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(r[t]=n.value),r},Re={f:Cr},M=Y?function(e,r,t){return Re.f(e,r,Me(1,t))}:function(e,r,t){return e[r]=t,e},ie=function(e,r){try{M(g,e,r)}catch{g[e]=r}return r},be="__core-js_shared__",Nr=g[be]||ie(be,{}),T=Nr,Ar=Function.toString;typeof T.inspectSource!="function"&&(T.inspectSource=function(e){return Ar.call(e)});var We=T.inspectSource,Se=g.WeakMap,Ir=typeof Se=="function"&&/native code/.test(We(Se)),Je=Ae(function(e){(e.exports=function(r,t){return T[r]||(T[r]=t!==void 0?t:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})}),jr=0,Mr=Math.random(),Ke=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++jr+Mr).toString(36)},Oe=Je("keys"),Dr=function(e){return Oe[e]||(Oe[e]=Ke(e))},Ge={},_r=g.WeakMap,H,D,Q,Br=function(e){return Q(e)?D(e):H(e,{})},Lr=function(e){return function(r){var t;if(!h(r)||(t=D(r)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return t}};Ir?(F=T.state||(T.state=new _r),Fe=F.get,Pe=F.has,Te=F.set,H=function(e,r){return r.facade=e,Te.call(F,e,r),r},D=function(e){return Fe.call(F,e)||{}},Q=function(e){return Pe.call(F,e)}):(k=Dr("state"),Ge[k]=!0,H=function(e,r){return r.facade=e,M(e,k,r),r},D=function(e){return v(e,k)?e[k]:{}},Q=function(e){return v(e,k)});var F,Fe,Pe,Te,k,Ee={set:H,get:D,has:Q,enforce:Br,getterFor:Lr},Rr=Ae(function(e){var r=Ee.get,t=Ee.enforce,n=String(String).split("String");(e.exports=function(i,o,s,a){var c=a?!!a.unsafe:!1,l=a?!!a.enumerable:!1,u=a?!!a.noTargetGet:!1,f;if(typeof s=="function"&&(typeof o=="string"&&!v(s,"name")&&M(s,"name",o),f=t(s),f.source||(f.source=n.join(typeof o=="string"?o:""))),i===g){l?i[o]=s:ie(o,s);return}else c?!u&&i[o]&&(l=!0):delete i[o];l?i[o]=s:M(i,o,s)})(Function.prototype,"toString",function(){return typeof this=="function"&&r(this).source||We(this)})}),U=g,ke=function(e){return typeof e=="function"?e:void 0},Wr=function(e,r){return arguments.length<2?ke(U[e])||ke(g[e]):U[e]&&U[e][r]||g[e]&&g[e][r]},Jr=Math.ceil,Kr=Math.floor,Xe=function(e){return isNaN(e=+e)?0:(e>0?Kr:Jr)(e)},Gr=Math.min,Xr=function(e){return e>0?Gr(Xe(e),9007199254740991):0},qr=Math.max,zr=Math.min,Hr=function(e,r){var t=Xe(e);return t<0?qr(t+r,0):zr(t,r)},$e=function(e){return function(r,t,n){var i=ne(r),o=Xr(i.length),s=Hr(n,o),a;if(e&&t!=t){for(;o>s;)if(a=i[s++],a!=a)return!0}else for(;o>s;s++)if((e||s in i)&&i[s]===t)return e||s||0;return!e&&-1}},Qr={includes:$e(!0),indexOf:$e(!1)},Yr=Qr.indexOf,Zr=function(e,r){var t=ne(e),n=0,i=[],o;for(o in t)!v(Ge,o)&&v(t,o)&&i.push(o);for(;r.length>n;)v(t,o=r[n++])&&(~Yr(i,o)||i.push(o));return i},Ur=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Vr=Ur.concat("length","prototype"),et=Object.getOwnPropertyNames||function(r){return Zr(r,Vr)},rt={f:et},tt=Object.getOwnPropertySymbols,nt={f:tt},it=Wr("Reflect","ownKeys")||function(r){var t=rt.f(z(r)),n=nt.f;return n?t.concat(n(r)):t},ot=function(e,r){for(var t=it(r),n=Re.f,i=Le.f,o=0;o<t.length;o++){var s=t[o];v(e,s)||n(e,s,i(r,s))}},at=/#|\.prototype\./,B=function(e,r){var t=lt[st(e)];return t==ut?!0:t==ct?!1:typeof r=="function"?_(r):!!r},st=B.normalize=function(e){return String(e).replace(at,".").toLowerCase()},lt=B.data={},ct=B.NATIVE="N",ut=B.POLYFILL="P",ft=B,pt=Le.f,dt=function(e,r){var t=e.target,n=e.global,i=e.stat,o,s,a,c,l,u;if(n?s=g:i?s=g[t]||ie(t,{}):s=(g[t]||{}).prototype,s)for(a in r){if(l=r[a],e.noTargetGet?(u=pt(s,a),c=u&&u.value):c=s[a],o=ft(n?a:t+(i?".":"#")+a,e.forced),!o&&c!==void 0){if(typeof l==typeof c)continue;ot(l,c)}(e.sham||c&&c.sham)&&M(l,"sham",!0),Rr(s,a,l,e)}},qe=!!Object.getOwnPropertySymbols&&!_(function(){return!String(Symbol())}),gt=qe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",K=Je("wks"),j=g.Symbol,mt=gt?j:j&&j.withoutSetter||Ke,ze=function(e){return v(K,e)||(qe&&v(j,e)?K[e]=j[e]:K[e]=mt("Symbol."+e)),K[e]},vt=ze("match"),ht=function(e){var r;return h(e)&&((r=e[vt])!==void 0?!!r:De(e)=="RegExp")},yt=function(){var e=z(this),r="";return e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.sticky&&(r+="y"),r},wt=ze("replace"),xt=RegExp.prototype;dt({target:"String",proto:!0},{replaceAll:function e(r,t){var n=V(this),i,o,s,a,c,l,u,f,m;if(r!=null){if(i=ht(r),i&&(o=String(V("flags"in xt?r.flags:yt.call(r))),!~o.indexOf("g")))throw TypeError("`.replaceAll` does not allow non-global regexes");if(s=r[wt],s!==void 0)return s.call(r,n,t)}if(a=String(n),c=String(r),c==="")return e.call(a,/(?:)/g,t);if(l=a.split(c),typeof t!="function")return l.join(String(t));for(u=l[0],f=u.length,m=1;m<l.length;m++)u+=String(t(c,f,a)),f+=c.length+l[m].length,u+=l[m];return u}});var P=e=>{let r=typeof e;return e!==null&&(r==="object"||r==="function")},bt=new Set(["__proto__","prototype","constructor"]),St=e=>!e.some(r=>bt.has(r));function G(e){let r=e.split("."),t=[];for(let n=0;n<r.length;n++){let i=r[n];for(;i[i.length-1]==="\\"&&r[n+1]!==void 0;)i=i.slice(0,-1)+".",i+=r[++n];t.push(i)}return St(t)?t:[]}var re={get(e,r,t){if(!P(e)||typeof r!="string")return t===void 0?e:t;let n=G(r);if(n.length!==0){for(let i=0;i<n.length;i++)if(e=e[n[i]],e==null){if(i!==n.length-1)return t;break}return e===void 0?t:e}},set(e,r,t){if(!P(e)||typeof r!="string")return e;let n=e,i=G(r);for(let o=0;o<i.length;o++){let s=i[o];P(e[s])||(e[s]={}),o===i.length-1&&(e[s]=t),e=e[s]}return n},delete(e,r){if(!P(e)||typeof r!="string")return!1;let t=G(r);for(let n=0;n<t.length;n++){let i=t[n];if(n===t.length-1)return delete e[i],!0;if(e=e[i],!P(e))return!1}},has(e,r){if(!P(e)||typeof r!="string")return!1;let t=G(r);if(t.length===0)return!1;for(let n=0;n<t.length;n++)if(P(e)){if(!(t[n]in e))return!1;e=e[t[n]]}else return!1;return!0}};function Ot(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return X(this,void 0,void 0,function(){var t=this;return q(this,function(n){switch(!0){case e.length===0:return[2,d.default.workspace.getConfiguration()];case e.length===1:return[2,Ce(e[0])];default:return[2,Promise.all(e.map(function(i){return X(t,void 0,void 0,function(){return q(this,function(o){return[2,Ce(i)]})})}))]}})})}function Ce(e){return X(this,void 0,void 0,function(){var r,t;return q(this,function(n){switch(n.label){case 0:return r=e?.length?re.get(d.default.workspace.getConfiguration(),e):d.default.workspace.getConfiguration(),r&&Object.keys(r).length?[4,Ft(r)]:[3,2];case 1:return t=n.sent(),[3,3];case 2:t=r,n.label=3;case 3:return[2,t]}})})}function Ft(e){return X(this,void 0,void 0,function(){var r,t,n,i,o,s,a,a,c,l;return q(this,function(u){return r=JSON.stringify(e),r?.includes("${workspaceFolder}")&&(r=r.replace(/\${workspaceFolder}/g,te())),r?.includes("${workspaceFolderBasename}")&&(r=r.replace(/\${workspaceFolderBasename}/g,y.basename(te()))),r?.includes("${file}")&&(r=r.replace(/\${file}/g,$())),r?.includes("${relativeFile}")&&(r=r.replace(/\${relativeFile}/g,He())),r?.includes("${relativeFileDirname}")&&(r=r.replace(/\${relativeFileDirname}/g,Pt())),r?.includes("${fileBasename}")&&(r=r.replace(/\${fileBasename}/g,Tt())),r?.includes("${fileBasenameNoExtension}")&&(r=r.replace(/\${fileBasenameNoExtension}/g,Et())),r?.includes("${fileDirname}")&&(r=r.replace(/\${fileDirname}/g,kt())),r?.includes("${fileExtname}")&&(r=r.replace(/\${fileExtname}/g,Qe())),r?.includes("${cwd}")&&(r=r.replace(/\${cwd}/g,process.cwd())),r?.includes("${lineNumber}")&&(t=Ne(),t&&parseInt(t)&&(r=r.replace(/\${lineNumber}/g,Ne()))),r?.includes("${selectedText}")&&(n=$t().join(),n&&(r=r.replace(/\${selectedText}/g,n))),r?.includes("${execPath}")&&(r=r.replace(/\${execPath}/g,process.execPath)),r?.includes("${pathSeparator}")&&(r=r.replace(/\${pathSeparator}/g,y.sep)),r&&/\${workspaceFolder:[^}]+}/.test(r)&&(i=d.default.workspace.workspaceFolders,o=/\${workspaceFolder:(?<name>[^}]+)}/g,s=r.match(o),s?.length&&s.map(function(f){var m=f.match(/\${workspaceFolder:(?<name>[^}]+)\}/).groups;if(m.name){var A=i.find(function(O){return O.name===m.name});A&&(r=r.replaceAll("${workspaceFolder:"+m.name+"}",A.uri.fsPath))}})),r&&/\${env:[^}]+}/.test(r)&&(a=r.match(/\${env:(?<name>[^}]+)\}/).groups,a?.name&&process.env[a.name]&&(r=r.replace(/(\${env:[^}]+})/g,process.env[a.name]))),r&&/\${config:[^}]+}/.test(r)&&(a=r.match(/\${config:(?<name>[^}]+)\}/).groups,c=d.default.workspace.getConfiguration(),a?.name&&re.get(c,a.name)&&(l=String(re.get(c,a.name)),r=r.replace(/(\${config:[^}]+})/g,l))),[2,JSON.parse(r)]})})}function $(){var e=d.default.window.activeTextEditor;if(!e){d.default.window.showWarningMessage("No open editors");return}return e.document.uri.fsPath}function He(){var e=te();return y.relative(e,$())}function Pt(){return y.dirname(He())}function Tt(){return y.basename($())}function Et(){return y.basename($(),Qe())}function kt(){return y.dirname($())}function Qe(){return y.extname($())}function Ne(){var e=d.default.window.activeTextEditor;if(!e){d.default.window.showWarningMessage("No open editors");return}return String(e.selection.active.line)}function $t(){return d.default.window.activeTextEditor.selections.map(function(e){return d.default.window.activeTextEditor.document.getText(new d.default.Range(e.start.line,e.start.character,e.end.line,e.end.character))})}function te(e){var r,t;e===void 0&&(e="");var n=d.default.window.activeTextEditor;if(!n){d.default.window.showWarningMessage("No open editors");return}var i=d.default.workspace.getWorkspaceFolder((r=n?.document)===null||r===void 0?void 0:r.uri).uri;if(!(!((t=i.fsPath)===null||t===void 0)&&t.length)){d.default.window.showWarningMessage("No open workspaces");return}return e?.length?y.join(i.fsPath,e):i.fsPath}oe.getConfig=Ot});var ce=W((Wt,rr)=>{var Nt={}.toString;rr.exports=Array.isArray||function(e){return Nt.call(e)=="[object Array]"}});var nr=W((Jt,tr)=>{"use strict";var At=ce();tr.exports=function(r){return r!=null&&typeof r=="object"&&At(r)===!1}});var or=W((Gt,ir)=>{"use strict";var It=ce(),jt=nr(),Kt=Array.prototype.slice;ir.exports=C;function C(e,r){if(!(this instanceof C))return typeof r=="number"?new C(e).fromIndex(r):new C(e,r);this.str=e||"",this.lineToIndex=Mt(this.str),r=r||{},this.origin=typeof r.origin>"u"?1:r.origin}C.prototype.fromIndex=function(e){if(e<0||e>=this.str.length||isNaN(e))return null;var r=Dt(e,this.lineToIndex);return{line:r+this.origin,col:e-this.lineToIndex[r]+this.origin}};C.prototype.toIndex=function(e,r){if(typeof r>"u")return It(e)&&e.length>=2?this.toIndex(e[0],e[1]):jt(e)&&"line"in e&&("col"in e||"column"in e)?this.toIndex(e.line,"col"in e?e.col:e.column):-1;if(isNaN(e)||isNaN(r))return-1;if(e-=this.origin,r-=this.origin,e>=0&&r>=0&&e<this.lineToIndex.length){var t=this.lineToIndex[e],n=e===this.lineToIndex.length-1?this.str.length:this.lineToIndex[e+1];if(r<n-t)return t+r}return-1};function Mt(e){for(var r=e.split(`
`),t=new Array(r.length),n=0,i=0,o=r.length;i<o;i++)t[i]=n,n+=r[i].length+1;return t}function Dt(e,r){if(e>=r[r.length-1])return r.length-1;for(var t=0,n=r.length-2,i;t<n;)if(i=t+(n-t>>1),e<r[i])n=i-1;else if(e>=r[i+1])t=i+1;else{t=i;break}return t}});var Bt={};vr(Bt,{activate:()=>_t});module.exports=hr(Bt);var p=require("vscode");var b=require("path"),ur=I(L());var x=require("path"),ue=I(L()),sr=require("child_process"),lr=require("vscode");var Ye=I(L()),Ze=require("process"),Ue=require("vscode"),ae=new Map,se=0;function Ve(e,r,t){ae.set(e,{created:Date.now(),file:r,process:t})}function er(e){ae.delete(e),se=e}async function le(){let e=Object.entries(Object.fromEntries(ae)).map(([n,i])=>({label:i.file,detail:`${n} ${i.process} ${new Date(i.created).toISOString()}`})).reverse();if(!e.length)return;let{allowMultiTermination:r}=await(0,Ye.getConfig)("applescript"),t=await Ue.window.showQuickPick(e,{canPickMany:r,matchOnDescription:!0});t&&(Array.isArray(t)?t:[t]).map(i=>{let o=i.detail.split(" ")[0];(0,Ze.kill)(Number(o))})}var cr=I(or());async function ar(e){if(!await(0,ue.getConfig)("applescript.convertErrorRange"))return!1;let t=/^(?<filePath>[^:]+):(?<rangeFrom>\d+):((?<rangeTo>\d+):)?(?<message>.*)$/u.exec(e);if(!t?.groups?.rangeFrom)return!1;let n=lr.window.activeTextEditor?.document;if(!n)return console.error("[idleberg.applescript] Document not found"),!1;let i=n.getText();if(!i?.length)return console.error("[idleberg.applescript] Empty document"),!1;let o=(0,cr.default)(i,{origin:1}).fromIndex(t.groups.rangeFrom);return o?(o.col=o?.col&&t.groups.rangeTo?o.col:1,`${n.fileName}:${o.line}:${o.col}:${t.groups.message}`):!1}function N(e,r="scpt"){let t=(0,x.dirname)(e),n=(0,x.basename)(e,(0,x.extname)(e));return(0,x.join)(t,`${n}.${r}`)}async function fe(e,r,t,n){let{alwaysShowOutput:i}=await(0,ue.getConfig)("applescript");return new Promise((o,s)=>{n.clear(),i&&n.show();let a=(0,sr.spawn)(e,t);a?.pid&&Ve(a.pid,r,e),a.stdout.on("data",async c=>{let l=c.toString().trim();if(l.length){let u=await ar(l),f=u||l;typeof f=="string"&&n.appendLine(f)}}),a.stderr.on("data",async c=>{let l=c.toString().trim();if(l.length){let u=await ar(l),f=u||l;typeof f=="string"&&n.appendLine(f)}}),a.on("close",c=>(a?.pid&&er(a.pid),c===0||se===a.pid?o():s()))})}var pe=require("fs"),S=require("vscode");async function de(e=!1){if(typeof S.workspace.workspaceFolders>"u"){S.window.showErrorMessage("Task support is only available when working on a workspace folder. It is not available when editing single files.");return}let{alwaysOpenBuildTask:r,defaultBuildTask:t,osacompile:n,osascript:i}=await(0,ur.getConfig)("applescript"),o=S.window.activeTextEditor?.document;if(!o){console.error("[idleberg.applescript] Document not found");return}let s=(0,b.basename)(o.fileName),a=[],c=[],l=[];e===!0&&a.push("-l","JavaScript"),n.executeOnly===!0&&a.push("-x"),n.stayOpen===!0&&l.push("-s"),n.startupScreen===!0&&l.push("-u"),i.outputStyle.trim().length>0&&i.outputStyle.trim().length<=2&&c.push("-s",i.outputStyle.trim());let u={version:"2.0.0",tasks:[{label:"Run Script",type:"shell",command:"osascript",args:[...a,...c,s]},{label:"Compile Script",type:"shell",command:"osacompile",args:[...a,"-o",(0,b.basename)(N(o.fileName)),s],group:t==="script"?"build":"none"},{label:"Compile Script Bundle",type:"shell",command:"osacompile",args:[...a,"-o",(0,b.basename)(N(o.fileName,"scptd")),s],group:t==="bundle"?"build":"none"},{label:"Compile Application",type:"shell",command:"osacompile",args:[...a,"-o",(0,b.basename)(N(o.fileName,"app")),s],group:t==="app"?"build":"none"}]},f=JSON.stringify(u,null,2),m=(0,b.resolve)(S.workspace.workspaceFolders[0].uri.fsPath,".vscode"),A=(0,b.resolve)(m,"tasks.json");await pe.promises.mkdir(m);try{if(await pe.promises.writeFile(A,f),r){let O=await S.workspace.openTextDocument(A);S.window.showTextDocument(O)}}catch(O){console.error("[idleberg.applescript]",O instanceof Error?O.message:O)}}var ge=I(L());var me=require("os"),w=require("vscode"),Z=w.window.createOutputChannel("AppleScript");async function E(e,r={isJXA:!1}){let{ignoreOS:t,osacompile:n,showNotifications:i}=await(0,ge.getConfig)("applescript");if(r={...r,...n},(0,me.platform)()!=="darwin"&&t!==!0){w.window.showWarningMessage("This command is only available on macOS");return}let o=w.window.activeTextEditor?.document;if(!o){console.error("[idleberg.applescript] Document not found");return}o.save().then(()=>{let a=["-o",N(o.fileName,e)];r.isJXA===!0&&a.push("-l","JavaScript"),r.executeOnly===!0&&a.push("-x"),e==="app"&&r.stayOpen===!0&&a.push("-s"),e==="app"&&r.startupScreen===!0&&a.push("-u"),a.push(o.fileName),fe("osacompile",o.fileName,a,Z).then(()=>{i&&w.window.showInformationMessage(`Successfully compiled '${o.fileName}'`)}).catch(c=>{console.error("[idleberg.applescript]",c instanceof Error?c.message:c),Z.show(!0),i&&w.window.showErrorMessage("Failed to compile or exited with error (see output for details)")})})}async function ve(e={isJXA:!1}){let{ignoreOS:r,osascript:t,showNotifications:n}=await(0,ge.getConfig)("applescript");if((0,me.platform)()!=="darwin"&&r!==!0){w.window.showWarningMessage("This command is only available on macOS");return}let i=w.window?.activeTextEditor?.document;if(!i){console.error("[idleberg.applescript] Document not found");return}let o=[];i.isDirty?i.getText().split(`
`).forEach(function(a){o.push("-e",a)}):o.push(i.fileName),t.outputStyle.trim().length>0&&t.outputStyle.trim().length<=2&&o.unshift("-s",t.outputStyle.trim()),e.isJXA===!0&&o.unshift("-l","JavaScript"),fe("osascript",i.fileName,o,Z).catch(s=>{console.error("[idleberg.applescript]",s instanceof Error?s.message:s),Z.show(!0),n&&w.window.showErrorMessage("Failed to run script or exited with error (see output for details)")})}async function _t(e){e.subscriptions.push(p.commands.registerTextEditorCommand("extension.applescript.run",async()=>await ve()),p.commands.registerTextEditorCommand("extension.applescript.compile",async()=>await E("scpt")),p.commands.registerTextEditorCommand("extension.applescript.compileBundle",async()=>await E("scptd")),p.commands.registerTextEditorCommand("extension.applescript.compileApp",async()=>await E("app")),p.commands.registerTextEditorCommand("extension.applescript.createBuildTask",async()=>await de()),p.commands.registerCommand("extension.applescript.openSettings",async()=>{p.commands.executeCommand("workbench.action.openSettings","@ext:idleberg.applescript")}),p.commands.registerTextEditorCommand("extension.applescript.terminateProcess",async()=>{await le()}),p.commands.registerTextEditorCommand("extension.jxa.run",async()=>await ve({isJXA:!0})),p.commands.registerTextEditorCommand("extension.jxa.compile",async()=>await E("scpt",{isJXA:!0})),p.commands.registerTextEditorCommand("extension.jxa.compileBundle",async()=>await E("scptd",{isJXA:!0})),p.commands.registerTextEditorCommand("extension.jxa.compileApp",async()=>await E("app",{isJXA:!0})),p.commands.registerTextEditorCommand("extension.jxa.createBuildTask",async()=>await de(!0)),p.commands.registerCommand("extension.jxa.openSettings",()=>{p.commands.executeCommand("workbench.action.openSettings","@ext:idleberg.applescript")}),p.commands.registerTextEditorCommand("extension.jxa.terminateProcess",async()=>{await le()}))}0&&(module.exports={activate});
/*! Bundled license information:

vscode-get-config/dist/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

isobject/index.js:
  (*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2015, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

line-column/lib/line-column.js:
  (**
   * line-column - Convert efficiently index to/from line-column in a string
   * @module  lineColumn
   * @license MIT
   *)
*/
